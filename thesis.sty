\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{thesis}[2013/11/22 v5.0 Typographic style for a classic-looking thesis]
\RequirePackage{ifthen}
\RequirePackage{verbatim}         % Provide the possibility for multi-line comments
\newboolean{@drafting}            % Activate/Deactivate drafting informations
\newboolean{@eulerchapternumbers} % use AMS Euler for chapter font (otherwise Palatino)
\newboolean{@layout}              % add a page to the document which shows the layout visually. Cant use in production mode
\newboolean{@colophon}            % Loads the packages which are needed to create a nice colophon page

%---------
% Options
%---------
%\DeclareOption{a5paper}{\setboolean{@a5paper}{true}}
\DeclareOption{drafting}{\setboolean{@drafting}{true}}
\DeclareOption{eulerchapternumbers}{\setboolean{@eulerchapternumbers}{true}}
\DeclareOption{layout}{\setboolean{@layout}{true}}
\DeclareOption{colophon}{\setboolean{@colophon}{true}}
\ProcessOptions\relax

%---------------
% Drafting mode
%---------------
\ifthenelse{\boolean{@drafting}}
{%
    \ifthenelse{\boolean{@layout}}
    {
    	\RequirePackage{layout}
    }{\relax}%
}{%
    \ifthenelse{\boolean{@layout}}
    {
    	\setboolean{@layout}{false}%
    }{\relax}%
}

%----------
% Colophon
%----------
\ifthenelse{\boolean{@colophon}}
{%
    \RequirePackage{hologo}                        % Wird zum rendern des LaTeX und LuLaTeX "Logos" verwendet
    \RequirePackage{ifluatex}                      % Testen ob LuLaTeX installiert ist

    %------------------------------------------------
    % Determine the current running version of LaTeX
    %------------------------------------------------
    \newcommand*{\InfoLaTeX}{%
      \hologo{\fmtname}
    }

    %---------------------------------------------------
    % Determine the current running version of LuaLaTeX
    %---------------------------------------------------
    \newcommand*{\InfoTeX}{%
	    \ifluatex%
		    \hologo{LuaTeX}-%
      	    \begingroup
			    \count@=\luatexversion
			    \divide\count@ by 100 %
			    \edef\x{\the\count@}%
			    \count@=-\x\relax
			    \multiply\count@ by 100 %
			    \advance\count@ by \luatexversion
			    \x.\the\count@.\luatexrevision
		    \endgroup
	    \fi%
    }%
}



%------------
% Font stuff
%------------

% mikrotypographische Optimierungen
\ifthenelse{\boolean{@drafting}}
{% Drafting mode enabled
    \PackageInfo{thesis}{Setting document in "Draft" mode.}%
    \PassOptionsToPackage{draft}{microtype}
}
{% Drafting mode disabled
    \PackageInfo{thesis}{Setting document in "Final" mode.}%
    \PassOptionsToPackage{final}{microtype}
}
\RequirePackage{microtype}


% Euler eurb10 / Palatino OSF pplr9d / Palatino SC pplrc9d
% Latin Modern cork-lmr10 / Minion MinionPro-Regular-osf-t1
% (MinionPro-SemiboldCapt-osf-t1 MinionPro-SemiboldDisp-osf-t1)
\ifthenelse{\boolean{@eulerchapternumbers}}% font for the chapter numbers
{%
    \newfont{\chapterNumber}{eurb10 scaled 7000}%
}{%
    \newfont{\chapterNumber}{pplr9d scaled 7000}
}